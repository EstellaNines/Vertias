---
description:
# Cursor 工作区规则

## MCP 使用规范和代码修改准则

### MCP 工具自动调用详细说明

#### 必须自动调用MCP工具的情况：

1. **文件操作时**
   - 读取文件内容：自动使用 `read_file` 工具
   - 创建新文件：自动使用 `write` 或 `create_or_update_file` 工具
   - 修改现有文件：自动使用 `search_replace` 或 `MultiEdit` 工具
   - 删除文件：自动使用 `delete_file` 工具

2. **代码搜索和分析时**
   - 查找特定代码：自动使用 `codebase_search` 工具
   - 搜索文件名：自动使用 `glob_file_search` 工具
   - 精确文本搜索：自动使用 `grep` 工具
   - 目录浏览：自动使用 `list_dir` 工具

3. **Unity项目操作时**
   - 管理Unity脚本：自动使用 `mcp_unityMCP_manage_script` 工具
   - 场景操作：自动使用 `mcp_unityMCP_manage_scene` 工具
   - GameObject操作：自动使用 `mcp_unityMCP_manage_gameobject` 工具
   - 资源管理：自动使用 `mcp_unityMCP_manage_asset` 工具
   - 编辑器控制：自动使用 `mcp_unityMCP_manage_editor` 工具

4. **任务管理时**
   - 复杂任务规划：自动使用 `todo_write` 工具进行任务分解和跟踪
   - 任务状态更新：及时更新todo状态为completed

5. **终端操作时**
   - 执行命令：自动使用 `run_terminal_cmd` 工具
   - 需要系统级操作时优先使用工具而非询问用户

#### MCP工具使用原则：

- **主动性**：不等待用户明确要求，根据对话内容主动判断并使用相应工具
- **并行性**：能够并行执行的操作尽量同时进行，提高效率
- **完整性**：确保使用工具获取完整信息后再进行回复
- **准确性**：工具调用参数必须准确，避免因参数错误导致操作失败

### Unity Inspector 中文显示规范

#### FieldLabelAttribute 使用要求：

- **强制使用**：所有需要在Inspector中显示的公共变量都必须使用 `[FieldLabel("中文变量名")]` 属性
- **引用方式**：在脚本顶部添加 `using` 语句或直接使用完整路径引用
- **命名规范**：中文标签应该简洁明了，准确描述变量功能
- **示例格式**：
  ```csharp
  [FieldLabel("玩家移动速度")]
  public float playerMoveSpeed = 5.0f;
  
  [FieldLabel("敌人生命值")]
  public int enemyHealth = 100;
  
  [FieldLabel("武器预制体")]
  public GameObject weaponPrefab;
  ```

#### Inspector显示优化：

- 所有SerializeField私有变量也需要使用FieldLabel属性
- 数组和列表变量使用描述性中文标签
- 布尔值变量使用问句形式的中文标签（如"是否自动攻击"）

### MCP 工具使用要求

- 在对话过程中时刻使用 MCP 工具进行操作
- 优先使用工具完成任务，而不是询问用户
- 遇到任何需要文件操作、代码分析、Unity操作的情况都要自动调用相应工具

### 代码注释规范

- 所有生成的代码必须包含详细的说明注释
- 每个函数必须有双斜杠(//)功能注释，说明函数的作用、参数和返回值
- 类和重要变量需要添加XML文档注释

### 报错处理流程

1. 当用户反馈报错时，首先分析报错问题的根本原因
2. 然后再进行代码修改
3. 修改过程中要详细标注修改的部分和先后变化
4. 避免使用"新增："、"修复："、"修改"等标记术语
5. 删减报错代码时直接删除错误内容，不使用注释方式保留

### 逻辑冲突处理

- 当 AI 的理解与用户逻辑不一致时，需要根据用户给出的方案反馈进行可行性判断
- 先提供详细的文字方案说明
- 获得用户确认后再开始实现代码脚本的变化

### 代码修改原则

- 使用最低侵入式代码修改与增加
- 不要随意更改代码结构
- 每次大修逻辑需要注明修改的功能与原理并汇报给用户
- 保持代码的整洁性和可维护性
- 所有公共变量必须添加FieldLabel属性以在Inspector中显示中文

### 语言要求

- 始终使用中文简体进行回复和交流

globs:
alwaysApply: true
---
